<div class="desagio-container">
  <!-- Bot√£o Voltar -->
  <a class="btn-voltar" routerLink="/calculadora">
    ‚Üê Voltar
  </a>

  <div class="desagio-header">
    <h2>üìâ Calculadora de Des√°gio</h2>
    <p class="subtitle">Calcule o desconto para pagamento antecipado</p>
  </div>

  <!-- Explica√ß√£o da F√≥rmula -->
  <div class="formula-info">
    <h3>Como funciona o c√°lculo?</h3>
    <div class="formulas">
      <div class="formula-item">
        <span class="formula-label">Fator Di√°rio:</span>
        <code>Fator (%) √∑ 30 dias</code>
      </div>
      <div class="formula-item">
        <span class="formula-label">Des√°gio:</span>
        <code>(Fator √∑ 30) √ó Prazo √ó Valor √∑ 100</code>
      </div>
      <div class="formula-item total">
        <span class="formula-label">Valor L√≠quido:</span>
        <code>Valor de Face - Des√°gio</code>
      </div>
    </div>
  </div>

  <!-- Formul√°rio -->
  <div class="form-section">
    <div class="form-row">
      <div class="form-group">
        <label for="desagioValorFace">
          Valor de Face (R$)
          <span class="hint">Valor original do t√≠tulo</span>
        </label>
        <input
          id="desagioValorFace"
          type="number"
          [(ngModel)]="desagioValorFace"
          step="0.01"
          min="0"
          placeholder="Ex: 10.000,00">
      </div>

      <div class="form-group">
        <label for="desagioFator">
          Fator (%)
          <span class="hint">Taxa de des√°gio mensal</span>
        </label>
        <div class="input-with-suffix">
          <input
            id="desagioFator"
            type="number"
            [(ngModel)]="desagioFator"
            step="0.01"
            min="0"
            placeholder="Ex: 2,50">
          <span class="suffix">%</span>
        </div>
      </div>

      <div class="form-group">
        <label for="desagioPrazo">
          Prazo (dias)
          <span class="hint">Dias at√© o vencimento</span>
        </label>
        <input
          id="desagioPrazo"
          type="number"
          [(ngModel)]="desagioPrazo"
          min="0"
          placeholder="Ex: 30">
      </div>
    </div>

    <div class="button-group">
      <button type="button" class="btn-calcular" (click)="calcularDesagio()">
        <span class="btn-icon">üìâ</span>
        Calcular Des√°gio
      </button>
      <button type="button" class="btn-limpar" (click)="limparDesagio()" *ngIf="resultadoDesagio">
        <span class="btn-icon">üîÑ</span>
        Nova Simula√ß√£o
      </button>
    </div>
  </div>

  <!-- Resultado -->
  <div *ngIf="resultadoDesagio" class="resultado">
    <h3>üìã Resultado da Simula√ß√£o</h3>

    <div class="resultado-detalhes">
      <div class="input-summary">
        <div class="summary-item">
          <span class="label">Valor de Face:</span>
          <span class="value">{{ formatarMoeda(resultadoDesagio.valorFace) }}</span>
        </div>
        <div class="summary-item">
          <span class="label">Fator Mensal:</span>
          <span class="value">{{ resultadoDesagio.fator }}%</span>
        </div>
        <div class="summary-item">
          <span class="label">Prazo:</span>
          <span class="value">{{ resultadoDesagio.prazo }} {{ resultadoDesagio.prazo === 1 ? 'dia' : 'dias' }}</span>
        </div>
        <div class="summary-item">
          <span class="label">Fator Di√°rio:</span>
          <span class="value taxa">{{ (resultadoDesagio.fator / 30).toFixed(4) }}%</span>
        </div>
      </div>

      <div class="calculo-breakdown">
        <div class="breakdown-item">
          <div class="breakdown-header">
            <span class="breakdown-label">Valor do Des√°gio</span>
            <span class="breakdown-formula">({{ resultadoDesagio.fator }}% √∑ 30) √ó {{ resultadoDesagio.prazo }} √ó {{ formatarMoeda(resultadoDesagio.valorFace) }} √∑ 100</span>
          </div>
          <div class="breakdown-value negative">- {{ formatarMoeda(resultadoDesagio.desagio) }}</div>
        </div>

        <div class="breakdown-item total">
          <div class="breakdown-header">
            <span class="breakdown-label">Valor L√≠quido (Face - Des√°gio)</span>
          </div>
          <div class="breakdown-value-total">{{ formatarMoeda(resultadoDesagio.valorLiquido) }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
