<app-bancos></app-bancos>

<section class="news">
  <div class="news-inner">
    <div class="news-head">
      <h2>Últimas publicações</h2>
      <a class="link" routerLink="/noticias">Ver todas</a>
    </div>

    <!-- Loading -->
    <div class="loading-container" *ngIf="loading">
      <div class="spinner"></div>
      <p>Carregando notícias...</p>
    </div>

    <!-- Grid de Notícias -->
    <div class="news-grid" *ngIf="!loading && noticias.length">
      <a class="news-card" *ngFor="let n of noticias" [routerLink]="['/noticia', n.slug]">
        <div class="img">
          <img
            [src]="n.imagemCapa || 'https://images.unsplash.com/photo-1526628953301-3e589a6a8b74?w=400&q=80'"
            [alt]="n.titulo"
            (error)="onImageError($event)"
          >
          <span class="tag" *ngIf="n.categoria">{{ n.categoria }}</span>
        </div>

        <div class="content">
          <div class="meta">
            <span class="material-icons">event</span>
            <span>{{ formatarData(n.dataPublicacao) }}</span>
            <span class="dot">•</span>
            <span class="material-icons">schedule</span>
            <span>{{ calcularTempoLeitura(n.conteudo) }} MIN DE LEITURA</span>
          </div>

          <h3>{{ n.titulo }}</h3>
          <p>{{ n.resumo }}</p>

          <span class="read">Ler mais</span>
        </div>
      </a>
    </div>

    <!-- Vazio -->
    <div class="empty" *ngIf="!loading && !noticias.length">
      <span class="material-icons">article</span>
      <p>Nenhuma publicação disponível no momento.</p>
    </div>
  </div>
</section>

<app-finance-highlights></app-finance-highlights>
