<article class="noticia-page">
  <!-- Loading -->
  <div class="loading" *ngIf="loading">
    <div class="spinner"></div>
    <p>Carregando notícia...</p>
  </div>

  <!-- Erro -->
  <div class="erro" *ngIf="erro && !loading">
    <span class="material-icons">error_outline</span>
    <h2>Notícia não encontrada</h2>
    <p>{{ erro }}</p>
    <div class="btns">
      <button (click)="voltar()">Voltar para notícias</button>
      <a routerLink="/">Ir para Home</a>
    </div>
  </div>

  <!-- Notícia -->
  <div class="content" *ngIf="noticia && !loading && !erro">
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
      <a routerLink="/noticias">← Voltar para notícias</a>
    </nav>

    <!-- Header -->
    <header class="article-header">
      <span class="categoria" *ngIf="noticia.categoria">{{ noticia.categoria }}</span>
      <h1>{{ noticia.titulo }}</h1>
      <p class="resumo">{{ noticia.resumo }}</p>

      <div class="meta">
        <div class="item">
          <span class="material-icons">event</span>
          <span>{{ formatarData(noticia.dataPublicacao) }}</span>
        </div>
        <div class="item">
          <span class="material-icons">schedule</span>
          <span>{{ calcularTempoLeitura() }} min de leitura</span>
        </div>
        <div class="item" *ngIf="noticia.autorNome">
          <span class="material-icons">person</span>
          <span>{{ noticia.autorNome }}</span>
        </div>
        <div class="item" *ngIf="noticia.visualizacoes > 0">
          <span class="material-icons">visibility</span>
          <span>{{ noticia.visualizacoes }} visualizações</span>
        </div>
      </div>
    </header>

    <!-- Imagem de Capa -->
    <figure class="cover" *ngIf="noticia.imagemCapa">
      <img
        [src]="noticia.imagemCapa"
        [alt]="noticia.titulo"
        (error)="onImageError($event)"
      >
    </figure>

    <!-- Conteúdo -->
    <div class="article-body" [innerHTML]="getConteudoSeguro()"></div>

    <!-- Footer -->
    <footer class="article-footer">
      <button class="btn-voltar" (click)="voltar()">
        <span class="material-icons">arrow_back</span>
        Voltar para notícias
      </button>
    </footer>
  </div>
</article>
